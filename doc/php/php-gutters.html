<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Megrim" rel="stylesheet">
    <link rel="shortcut icon" type="image/x-icon" href="../../assets/img/ebur.png">
    <link rel="stylesheet" href="../../assets/vendor/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../assets/vendor/bootstrap/dist/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../../assets/vendor/prism/themes/prism-okaidia.css">
    <link rel="stylesheet" href="../../assets/vendor/prism/plugins/line-numbers/prism-line-numbers.css">
    <link rel="stylesheet" href="../../assets/vendor/prism/plugins/command-line/prism-command-line.css">
    <link rel="stylesheet" href="../../assets/style/main.css">
    <title>php 32 bit add/sub machine in php</title>
</head>
<body class="arcticle">
<div class="article_bg"></div>
<div class="container">
    <h2>php 32 bit add/sub machine in php</h2>
    <p class="date">created: 20170720</p>
    <p class="updated">updated: 20170921</p>
    <h3><a href="../../index.html#index_php" class="index">back</a></h3>
    <h4>AND Gutter</h4>
    <p>The AND gutter returns 1 if all inputs are 1.</p>
    <pre><code class="language-bash">Truth Table
+-------+
|a b   s|
|-------|
|0 0   0|
|0 1   0|
|1 0   0|
|1 1   1|
+-------+</code></pre>
    <pre><code class="language-php line-numbers">namespace Gutter;

class AndGutter
{
    /**
     * @param $a
     * @param $b
     *
     * @return int
     */
    public function out($a, $b)
    {
        if ($a > 1 || $a < 0 || $b > 1 || $b < 0) {
            throw new \InvalidArgumentException("Invalid input(s)!");
        } else {
            return ($a === 1 && $b === 1) ? 1 : 0;
        }
    }
}</code></pre>
    <h4>OR Gutter</h4>
    <p>The OR gutter returns 1 if one or all inputs are 1.</p>
    <pre><code class="language-bash">Truth Table
+-------+
|a b   s|
|-------|
|0 0   0|
|0 1   1|
|1 0   1|
|1 1   1|
+-------+</code></pre>
    <pre><code class="language-php line-numbers">namespace Gutter;

class OrGutter
{
    /**
     * @param $a
     * @param $b
     *
     * @return int
     */
    public function out($a, $b)
    {
        if ($a > 1 || $a < 0 || $b > 1 || $b < 0) {
            throw new \InvalidArgumentException("Invalid input(s)!");
        } else {
            return ($a === 1 || $b === 1) ? 1 : 0;
        }
    }
}</code></pre>
    <h4>XOR Gutter</h4>
    <p>The XOR gutter returns 1 if only one input is 1.</p>
    <pre><code class="language-bash">Truth Table
+-------+
|a b   s|
|-------|
|0 0   0|
|0 1   1|
|1 0   1|
|1 1   0|
+-------+</code></pre>
    <pre><code class="language-php line-numbers">namespace Gutter;

class XorGutter
{
    /**
     * @param $a
     * @param $b
     *
     * @return int
     */
    public function out($a, $b)
    {
        if ($a > 1 || $a < 0 || $b > 1 || $b < 0) {
            throw new \InvalidArgumentException("Invalid input(s)!");
        } else {
            return (($a === 1 && $b === 0) || ($a === 0 && $b === 1)) ? 1 : 0;
        }
    }
}</code></pre>
    <h4>NOT Gutter</h4>
    <p>The NOT gutter inverts all incoming streams.</p>
    <pre><code class="language-php line-numbers">namespace Gutter;

class NotGutter
{
    /**
     * @param $x
     *
     * @return int
     */
    public function out($x)
    {
        if($x < 0 || $x > 1){
            throw new \InvalidArgumentException("Invalid input(s)!");
        } else {
            return ($x === 0) ? 1 : 0;
        }
    }
}</code></pre>
    <h4>Halfadder</h4>
    <p>A halfadder circuit is able to add two bits and returns the sum and carry. The truth table will show its
        functionality.</p>
    <pre><code class="language-bash">Truth Table
+---------+
|a b   s c|
|---------|
|0 0   0 0|
|0 1   1 0|
|1 0   1 0|
|1 1   0 1|
+---------+</code></pre>
    <pre><code class="language-php line-numbers">namespace Gutter;

class HalfAdder
{
    /**
     * @param $a
     * @param $b
     *
     * @return mixed[]
     */
    public function out($a, $b)
    {
        $and   = new AndGutter();
        $xor   = new XorGutter();
        $out['s'] = $xor->out($a, $b);
        $out['c'] = $and->out($a, $b);

        return $out;
    }
}</code></pre>
    <h4>Fulladder</h4>
    <p>A full adder adds binary numbers and accounts for values carried in as well as out. A one-bit full adder adds
        three one-bit numbers, often written as A, B, and Cin.</p>
    <pre><code class="language-bash">Truth Table
+----------------+
|a b cin   s cout|
|----------------|
|0 0 0     0 0   |
|0 0 1     1 0   |
|0 1 0     1 0   |
|0 1 1     0 1   |
|1 0 0     1 0   |
|1 0 1     0 1   |
|1 1 0     0 1   |
|1 1 1     1 1   |
+----------------+</code></pre>
    <pre><code class="language-php line-numbers">namespace Gutter;

class FullAdder
{
    /**
     * @param $a
     * @param $b
     * @param $c
     *
     * @return mixed[]
     */
    public function out($a, $b, $c)
    {
        $hf = new HalfAdder();
        $or = new OrGutter();

        $sc1      = $hf->out($a, $b);
        $sc2      = $hf->out($sc1['s'], $c);
        $out['s'] = $sc2['s'];
        $out['c'] = $or->out($sc1['c'], $sc2['c']);

        return $out;
    }
}</code></pre>
    <h4>32 Bit Add Sub Machine</h4>
    <p>placeholder...</p>
    <pre><code class="language-php line-numbers">use Gutter\FullAdder;
use Gutter\XorGutter;

class _32BitAddSubMachine
{
    /**
     * @param $a
     * @param $b
     * @param $sub
     *
     * @return mixed[]
     */
    public function out($a, $b, $sub)
    {
        $a = array_reverse($a);
        $b = array_reverse($b);

        $fa  = new FullAdder();
        $xor = new XorGutter();

        $out[0] = $fa->out($a[0], ($sub === true) ? $xor->out(1, $b[0]) : $b[0], ($sub === true) ? 1 : 0);

        for ($i = 1; $i <= 31; $i++) {
            $out[$i] = $fa->out($a[$i], ($sub === true) ? $xor->out(1, $b[$i]) : $b[$i], $out[$i - 1]['c']);
        }

        return $out;
    }
}</code></pre>
    <h4>Machine test</h4>
    <pre><code class="language-php line-numbers">require_once 'src/Gutter/AndGutter.php';
require_once 'src/Gutter/OrGutter.php';
require_once 'src/Gutter/NotGutter.php';
require_once 'src/Gutter/XorGutter.php';
require_once 'src/Gutter/HalfAdder.php';
require_once 'src/Gutter/FullAdder.php';
require_once 'src/DigitalCircuit/_32BitAddSubMachine.php';

$_32bitAddSubMachine = new _32BitAddSubMachine();

$out = $_32bitAddSubMachine->out(
//  32 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1], // a
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1], // b
    // set true for substraction
    false
);

for ($i = 31; $i >= 0; $i--) {
    echo $out[$i]['s'];
}
echo "\n";</code></pre>
</div>
<script src="../../assets/vendor/jquery/dist/jquery.min.js"></script>
<script src="../../assets/vendor/prism/prism.js"></script>
<script src="../../assets/vendor/prism/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script src="../../assets/vendor/prism/plugins/command-line/prism-command-line.min.js"></script>
<script src="../../assets/vendor/prism/components/prism-php.min.js"></script>
<script src="../../assets/vendor/prism/components/prism-bash.min.js"></script>
<script src="../../assets/vendor/prism/components/prism-twig.min.js"></script>
</body>
</html>
